{"code":"import { DefinitionChangeType } from './designer-configuration';\r\nexport class CustomActionController {\r\n    constructor(configuration, state, stateModifier) {\r\n        this.configuration = configuration;\r\n        this.state = state;\r\n        this.stateModifier = stateModifier;\r\n    }\r\n    trigger(action, step, sequence) {\r\n        const handler = this.configuration.customActionHandler;\r\n        if (!handler) {\r\n            console.warn(`Custom action handler is not defined (action type: ${action.type})`);\r\n            return;\r\n        }\r\n        const context = this.createCustomActionHandlerContext();\r\n        handler(action, step, sequence, context);\r\n    }\r\n    createCustomActionHandlerContext() {\r\n        return {\r\n            notifyStepNameChanged: (stepId) => this.notifyStepChanged(DefinitionChangeType.stepNameChanged, stepId, false),\r\n            notifyStepPropertiesChanged: (stepId) => this.notifyStepChanged(DefinitionChangeType.stepPropertyChanged, stepId, false),\r\n            notifyStepInserted: (stepId) => this.notifyStepChanged(DefinitionChangeType.stepInserted, stepId, true),\r\n            notifyStepMoved: (stepId) => this.notifyStepChanged(DefinitionChangeType.stepMoved, stepId, true),\r\n            notifyStepDeleted: (stepId) => this.notifyStepChanged(DefinitionChangeType.stepDeleted, stepId, true)\r\n        };\r\n    }\r\n    notifyStepChanged(changeType, stepId, updateDependencies) {\r\n        if (!stepId) {\r\n            throw new Error('Step id is empty');\r\n        }\r\n        this.state.notifyDefinitionChanged(changeType, stepId);\r\n        if (updateDependencies) {\r\n            this.stateModifier.updateDependencies();\r\n        }\r\n    }\r\n}\r\n","references":["C:/Users/abrah/Documents/sequential/sequential-workflow-designer/designer/src/definition.ts","C:/Users/abrah/Documents/sequential/sequential-workflow-designer/designer/src/designer-configuration.ts","C:/Users/abrah/Documents/sequential/sequential-workflow-designer/designer/src/designer-state.ts","C:/Users/abrah/Documents/sequential/sequential-workflow-designer/designer/src/modifier/state-modifier.ts"],"dts":{"name":"C:/Users/abrah/Documents/sequential/sequential-workflow-designer/designer/build/custom-action-controller.d.ts","writeByteOrderMark":false,"text":"import { Sequence, Step } from './definition';\r\nimport { CustomAction, DesignerConfiguration } from './designer-configuration';\r\nimport { DesignerState } from './designer-state';\r\nimport { StateModifier } from './modifier/state-modifier';\r\nexport declare class CustomActionController {\r\n    private readonly configuration;\r\n    private readonly state;\r\n    private readonly stateModifier;\r\n    constructor(configuration: DesignerConfiguration, state: DesignerState, stateModifier: StateModifier);\r\n    trigger(action: CustomAction, step: Step | null, sequence: Sequence): void;\r\n    private createCustomActionHandlerContext;\r\n    private notifyStepChanged;\r\n}\r\n"}}
